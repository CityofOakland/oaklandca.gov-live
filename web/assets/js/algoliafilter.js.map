{"version":3,"sources":["webpack:///./src/js/algoliafilter.js"],"names":["filterReveal","document","getElementById","filters","openClasses","closedClasses","addEventListener","e","preventDefault","classList","contains","add","remove","innerHTML","window","section","entryTitle","filtered","Math","round","Date","getTime","search","instantsearch","appId","apiKey","indexName","algoliaIndex","routing","searchParameters","snippetEllipsisText","undefined","addWidget","widgets","analytics","pushFunction","formattedParameters","state","results","ga","location","pathname","facetFilters","forEach","facet","menuSelect","container","attributeName","attribute","operator","limit","templates","header","moment","format","dateRangeWidget","connectors","connectRange","options","isFirstRendering","refine","MONTHSTART","startOf","MONTHEND","endOf","Calendar","element","$","same_day_range","start_date","end_date","presets","label","start","end","subtract","callback","this","datePicker","searchBox","placeholder","searchInputText","hits","cssClasses","root","hitsRootClass","empty","item","indexTemplate","transformItems","items","i","length","date","year","getFullYear","month","getMonth","day","getDate","formattedDate","d","nth","customPagination","connectPagination","renderOptions","isFirstRender","querySelector","pages","currentRefinement","nbPages","previous","next","first","includes","last","map","page","join","querySelectorAll","event","currentTarget","dataset","value","addWidgets","padding"],"mappings":"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","file":"/js/algoliafilter.js","sourcesContent":["const filterReveal = document.getElementById(\"filter-reveal\");\nconst filters = document.getElementById(\"algolia-filters\");\nconst openClasses = [\"opacity-100\", \"h-auto\", \"z-40\", \"visible\"];\nconst closedClasses = [\"opacity-0\", \"h-0\", \"z-neg-10\", \"invisible\"];\n\nif (filterReveal != null) {\n  filterReveal.addEventListener(\"click\", function(e) {\n    e.preventDefault();\n\n    if (filters.classList.contains(\"opacity-0\")) {\n      filters.classList.add(...openClasses);\n      filters.classList.remove(...closedClasses);\n      filterReveal.innerHTML = \"Hide Filters\";\n    } else {\n      filters.classList.add(...closedClasses);\n      filters.classList.remove(...openClasses);\n      filterReveal.innerHTML = \"Show Filters\";\n    }\n  }, false);\n}\n\nif (window.section && window.entryTitle) {\n  var filtered= `${window.section}:'${window.entryTitle}'`;\n}\n\nconst ts = Math.round((new Date()).getTime() / 1000);\nconst search = instantsearch({\n  appId: \"6V5VJO8ZG2\",\n  apiKey: \"9bded46d3070b2089499c70b2389708b\",\n  indexName: window.algoliaIndex,\n  routing: true,\n  searchParameters: {\n    snippetEllipsisText: \"â€¦\",\n    filters: filtered || undefined,\n  },\n});\n\nsearch.addWidget(\n  instantsearch.widgets.analytics({\n    pushFunction(formattedParameters, state, results) {\n      window.ga('set', 'page', window.location.pathname + window.location.search);\n      window.ga('send', 'pageView');\n    },\n  })\n);\n\nconst defaultTemplate =\n`<article class=\"py-8 sm:py-12 border-gray-300 border-b-2\">\n  {{#displayDate}}\n  <div class=\"text-base text-gray-400 mb-4\">\n    Publish Date: <b>{{ displayDate }}</b>\n  </div>\n  {{/displayDate}}\n  <h2 class=\"text-xl md:text-2xl my-0 {{#leadIn}} mt-0 mb-3 md:mb-6 {{/leadIn}}\">\n    <a href=\"{{ url }}\">\n      {{{ _highlightResult.title.value }}}\n    </a>\n  </h2>\n  {{#leadIn}}\n    <p class=\"text-base text-gray-700 md:text-lg my-2 md:my-4\">\n      {{{ _highlightResult.leadIn.value }}}\n    </p>\n  {{/leadIn}}\n</article>`;\n\nfacetFilters.forEach(facet => {\n  search.addWidget(\n    instantsearch.widgets.menuSelect({\n      container: facet.container,\n      attributeName: facet.attribute,\n      operator: 'or',\n      limit: 10,\n      templates: {\n        header: facet.header\n      }\n    })\n  );\n});\n\nif (typeof moment !== 'undefined') {\n  const ONE_DAY_IN_MS = 3600 * 24 * 1000;\n\n  const TODAY = moment().format('L');\n\n\n  const datePicker = instantsearch.connectors.connectRange(\n    (options, isFirstRendering) => {\n      if (!isFirstRendering) return;\n\n      const { refine } = options;\n\n      const MONTHSTART = new Date(moment().startOf('month')).getTime();\n      const MONTHEND = new Date(moment().endOf('month')).getTime();\n\n      refine([MONTHSTART, MONTHEND]);\n\n      new Calendar({\n        element: $('#calendar'),\n        same_day_range: true,\n        start_date: moment().startOf('month'),\n        end_date: moment().add(11, 'month').endOf('month'),\n        presets: [{\n          label: 'This month',\n          start: moment().startOf('month'),\n          end: moment().endOf('month')\n        },{\n          label: 'Next month',\n          start: moment().add(1, 'month').startOf('month'),\n          end: moment().add(1, 'month').endOf('month')\n        },{\n          label: 'Last month',\n          start: moment().subtract(1, 'month').startOf('month'),\n          end: moment().subtract(1, 'month').endOf('month')\n        },{\n          label: 'Last year',\n          start: moment().subtract(1, 'year').startOf('year'),\n          end: moment().subtract(1, 'year').endOf('year')\n        }],\n        callback: function() {\n          const start = new Date(this.start_date).getTime();\n          const end = new Date(this.end_date).getTime();\n          const actualEnd = start === end ? end + ONE_DAY_IN_MS - 1 : end;\n\n          refine([start, actualEnd]);\n        },\n      });\n    }\n  );\n\n  const dateRangeWidget = datePicker({\n    attributeName: 'date',\n  });\n\n  search.addWidget(dateRangeWidget);\n}\n\nsearch.addWidget(\n  instantsearch.widgets.searchBox({\n    container: \"#search-input\",\n    placeholder: window.searchInputText || \"Search\"\n  })\n);\n\nsearch.addWidget(\n  instantsearch.widgets.hits({\n    container: \"#hits\",\n    cssClasses: {\n      root: window.hitsRootClass || \"block\"\n    },\n    templates: {\n      empty: \"No results\",\n      item: window.indexTemplate || defaultTemplate,\n    },\n    transformItems: function(items){\n      for(var i = 0; i < items.length; i++) {\n        var item    = items[i];\n        var date    = new Date(item.date);\n        var months  = ['January','February','March','April','May','June','July','August','September','October','November','December'];\n\n        var nth = function(d) {\n          if (d > 3 && d < 21) return 'th';\n          switch (d % 10) {\n            case 1:  return \"st\";\n            case 2:  return \"nd\";\n            case 3:  return \"rd\";\n            default: return \"th\";\n          }\n        }\n\n        var year  = date.getFullYear();\n        var month = months[date.getMonth()];\n        var day   = date.getDate();\n\n        item.formattedDate = month + \" \" + day + nth(day) + \", \" + year;\n        items[i] = item;\n      }\n      return items;\n    }\n  })\n);\n\n// console.log('lkasjfdlskajf');\n\n// search.addWidget(\n//   instantsearch.widgets.pagination({\n//     container: \"#bottom-pagination\",\n//     // cssClasses: {\n//     //   root: \"p-0 inline-block\",\n//     //   disabled: \"w-0\"\n//     // },\n//     padding: 2,\n\n//     templates: {\n//       last: function(e){\n//         console.log(this);\n//         console.log(e);\n//       }\n//     }\n//     // scrollTo: false,\n//     // showFirst: false,\n//     // showLast: false,\n//   })\n// );\n\n// 1. Create a render function\nconst renderPagination = (renderOptions, isFirstRender) => {\n\n  const container = document.querySelector('#bottom-pagination');\n\n  // const {\n  //   number[] pages,\n  //   number currentRefinement,\n  //   number nbHits,\n  //   number nbPages,\n  //   boolean isFirstPage,\n  //   boolean isLastPage,\n  //   boolean canRefine,\n  //   function refine,\n  //   function createURL,\n  //   function widgetParams,\n  // } = renderOptions;\n  const { pages, currentRefinement, nbPages, refine } = renderOptions;\n\n  if (isFirstRender) {\n    // Do some initial rendering and bind events\n  }\n\n  // Render the widget\n\n  if(nbPages > 1) {\n\n    const previous  = currentRefinement > 0       ? '<li>Previous</li>' : '';\n    const next      = currentRefinement < nbPages -1 ? '<li>Next</li>'     : '';\n\n    const first = pages.includes(0) ? '' : `<li><a class=\"page\" href=\"#\" data-value=\"1\" style=\"font-weight: ${currentRefinement === 1 ? 'bold' : ''}\">1</a></li><li>...</li>`;\n    const last  = pages.includes(nbPages - 1) ? '' : `<li>...</li><li><a class=\"page\" href=\"#\" data-value=\"${nbPages}\" style=\"font-weight: ${currentRefinement === nbPages ? 'bold' : ''}\">${nbPages}</a></li>`;\n\n    container.innerHTML = `\n      <ul class=\"pagination\">\n        ${previous}\n        ${first}\n        ${pages\n          .map(page => `<li><a class=\"page ${currentRefinement === page ? 'page-active' : ''}\" href=\"#\" data-value=\"${page}\">${page + 1}</a></li>`)\n          .join('')}\n        ${last}\n        ${next}\n      </ul>\n    `;\n\n    [...container.querySelectorAll('a')].forEach(element => {\n      element.addEventListener('click', event => {\n        event.preventDefault();\n        refine(event.currentTarget.dataset.value);\n      });\n    });\n  } else {\n    container.innerHTML = '';\n  }\n};\n\n// 2. Create the custom widget\nconst customPagination = instantsearch.connectors.connectPagination(\n  renderPagination\n);\n\n// 3. Instantiate\nsearch.addWidgets([\n  customPagination({\n    padding: 2,\n  })\n]);\n\nsearch.start();\n"],"sourceRoot":""}