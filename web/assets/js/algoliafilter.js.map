{"version":3,"sources":["webpack:///./src/js/algoliafilter.js"],"names":["filterReveal","document","getElementById","filters","openClasses","closedClasses","addEventListener","e","preventDefault","classList","contains","add","remove","innerHTML","window","section","entryTitle","filtered","Math","round","Date","getTime","search","instantsearch","appId","apiKey","indexName","algoliaIndex","routing","searchParameters","undefined","highlightPreTag","highlightPostTag","snippetEllipsisText","addWidget","widgets","analytics","pushFunction","formattedParameters","state","results","ga","location","pathname","stats","container","autoHideContainer","templates","body","facetFilters","forEach","facet","menuSelect","attributeName","attribute","operator","limit","header","moment","format","dateRangeWidget","connectors","connectRange","options","isFirstRendering","refine","MONTHSTART","startOf","MONTHEND","endOf","Calendar","element","$","same_day_range","start_date","end_date","presets","label","start","end","subtract","callback","this","datePicker","searchBox","placeholder","searchInputText","hits","cssClasses","root","hitsRootClass","empty","item","indexTemplate","transformItems","items","i","length","date","year","getFullYear","month","getMonth","day","getDate","formattedDate","d","nth","customPagination","connectPagination","renderOptions","isFirstRender","querySelector","pages","currentRefinement","nbPages","previous","next","Array","keys","map","page","join","querySelectorAll","event","currentTarget","dataset","value","first","includes","last","addWidgets","padding"],"mappings":"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","file":"/js/algoliafilter.js","sourcesContent":["const filterReveal = document.getElementById(\"filter-reveal\");\nconst filters = document.getElementById(\"algolia-filters\");\nconst openClasses = [\"opacity-100\", \"h-auto\", \"z-40\", \"visible\"];\nconst closedClasses = [\"opacity-0\", \"h-0\", \"z-neg-10\", \"invisible\"];\n\nif (filterReveal != null) {\n  filterReveal.addEventListener(\"click\", function(e) {\n    e.preventDefault();\n\n    if (filters.classList.contains(\"opacity-0\")) {\n      filters.classList.add(...openClasses);\n      filters.classList.remove(...closedClasses);\n      filterReveal.innerHTML = \"Hide Filters\";\n    } else {\n      filters.classList.add(...closedClasses);\n      filters.classList.remove(...openClasses);\n      filterReveal.innerHTML = \"Show Filters\";\n    }\n  }, false);\n}\n\nif (window.section && window.entryTitle) {\n  var filtered= `${window.section}:'${window.entryTitle}'`;\n}\n\nconst ts = Math.round((new Date()).getTime() / 1000);\nconst search = instantsearch({\n  appId: \"6V5VJO8ZG2\",\n  apiKey: \"9bded46d3070b2089499c70b2389708b\",\n  indexName: window.algoliaIndex,\n  routing: true,\n  searchParameters: {\n    filters: filtered || undefined,\n    highlightPreTag: '<b class=\"font-bold\">',\n    highlightPostTag: '</b>',\n    snippetEllipsisText: \"…\",\n  },\n});\n\nsearch.addWidget(\n  instantsearch.widgets.analytics({\n    pushFunction(formattedParameters, state, results) {\n      window.ga('set', 'page', window.location.pathname + window.location.search);\n      window.ga('send', 'pageView');\n    },\n  })\n);\n\nsearch.addWidget(\n  instantsearch.widgets.stats({\n    container: '#stats',\n    autoHideContainer: true,\n    templates: {\n      body: `\n        <p class=\"mb-4 text-base font-normal border-b border-gray-800 pb-1 text-gray-1000\">\n          {{#query}}\n            Your search for “{{query}}” returned <span class=\"font-bold\" aria-live=\"polite\">{{ nbHits }} results</span>.\n          {{/query}}\n          {{^query}}\n            There are <span class=\"font-bold\" aria-live=\"polite\">{{ nbHits }} results</span>.\n          {{/query}}\n        </p>\n      `\n    }\n  })\n);\n\nconst defaultTemplate =\n`<article class=\"py-8 sm:py-12 border-gray-300 border-b-2\">\n  {{#displayDate}}\n  <div class=\"text-base text-gray-400 mb-4\">\n    Publish Date: <b>{{ displayDate }}</b>\n  </div>\n  {{/displayDate}}\n  <h2 class=\"text-xl md:text-2xl my-0 {{#leadIn}} mt-0 mb-3 md:mb-6 {{/leadIn}}\">\n    <a href=\"{{ url }}\">\n      {{{ _highlightResult.title.value }}}\n    </a>\n  </h2>\n  {{#leadIn}}\n    <p class=\"text-base text-gray-700 md:text-lg my-2 md:my-4\">\n      {{{ _highlightResult.leadIn.value }}}\n    </p>\n  {{/leadIn}}\n</article>`;\n\nfacetFilters.forEach(facet => {\n  search.addWidget(\n    instantsearch.widgets.menuSelect({\n      container: facet.container,\n      attributeName: facet.attribute,\n      operator: 'or',\n      limit: 10,\n      templates: {\n        header: facet.header\n      }\n    })\n  );\n});\n\nif (typeof moment !== 'undefined') {\n  const ONE_DAY_IN_MS = 3600 * 24 * 1000;\n\n  const TODAY = moment().format('L');\n\n\n  const datePicker = instantsearch.connectors.connectRange(\n    (options, isFirstRendering) => {\n      if (!isFirstRendering) return;\n\n      const { refine }  = options;\n\n      const MONTHSTART  = new Date(moment().startOf('month')).getTime();\n      const MONTHEND    = new Date(moment().add(11, 'month').endOf('month')).getTime();\n\n      refine([MONTHSTART, MONTHEND]);\n\n      new Calendar({\n        element: $('#calendar'),\n        same_day_range: true,\n        start_date: moment().startOf('month'),\n        end_date: moment().add(11, 'month').endOf('month'),\n        presets: [{\n          label: 'This year',\n          start: moment().startOf('month'),\n          end: moment().add(11, 'month').endOf('month')\n        },{\n          label: 'This month',\n          start: moment().startOf('month'),\n          end: moment().endOf('month')\n        },{\n          label: 'Next month',\n          start: moment().add(1, 'month').startOf('month'),\n          end: moment().add(1, 'month').endOf('month')\n        },{\n          label: 'Last month',\n          start: moment().subtract(1, 'month').startOf('month'),\n          end: moment().subtract(1, 'month').endOf('month')\n        },{\n          label: 'Last year',\n          start: moment().subtract(1, 'year').startOf('year'),\n          end: moment().subtract(1, 'year').endOf('year')\n        }],\n        callback: function() {\n          const start = new Date(this.start_date).getTime();\n          const end = new Date(this.end_date).getTime();\n          const actualEnd = start === end ? end + ONE_DAY_IN_MS - 1 : end;\n\n          refine([start, actualEnd]);\n        },\n      });\n    }\n  );\n\n  const dateRangeWidget = datePicker({\n    attributeName: 'date',\n  });\n\n  search.addWidget(dateRangeWidget);\n}\n\nsearch.addWidget(\n  instantsearch.widgets.searchBox({\n    container: \"#search-input\",\n    placeholder: window.searchInputText || \"Search\"\n  })\n);\n\nsearch.addWidget(\n  instantsearch.widgets.hits({\n    container: \"#hits\",\n    cssClasses: {\n      root: window.hitsRootClass || \"block\"\n    },\n    templates: {\n      empty: \"No results\",\n      item: window.indexTemplate || defaultTemplate,\n    },\n    transformItems: function(items){\n      for(var i = 0; i < items.length; i++) {\n        var item    = items[i];\n        var date    = new Date(item.date);\n        var months  = ['January','February','March','April','May','June','July','August','September','October','November','December'];\n\n        var nth = function(d) {\n          if (d > 3 && d < 21) return 'th';\n          switch (d % 10) {\n            case 1:  return \"st\";\n            case 2:  return \"nd\";\n            case 3:  return \"rd\";\n            default: return \"th\";\n          }\n        }\n\n        var year  = date.getFullYear();\n        var month = months[date.getMonth()];\n        var day   = date.getDate();\n\n        item.formattedDate = month + \" \" + day + nth(day) + \", \" + year;\n        items[i] = item;\n      }\n      return items;\n    }\n  })\n);\n\n// 1. Create a render function\nconst renderPagination = (renderOptions, isFirstRender) => {\n\n  const container = document.querySelector('#bottom-pagination');\n\n  const { pages, currentRefinement, nbPages, refine } = renderOptions;\n\n  if(nbPages > 1 && nbPages <= 7) {\n\n    const previous  = `<li><a class=\"prev ${currentRefinement > 0 ? '' : 'disabled' }\" href=\"#\" data-value=\"${currentRefinement - 1}\">Previous</a></li>`;\n    const next      = `<li><a class=\"next ${currentRefinement < nbPages - 1 ? '' : 'disabled'}\" href=\"#\" data-value=\"${currentRefinement + 1}\">Next</a></li>`;\n\n    const pages = [...Array(nbPages).keys()];;\n\n    container.innerHTML = `\n      <ul class=\"pagination\">\n        ${previous}\n        ${pages\n          .map(page => `<li><a class=\"page ${currentRefinement === page ? 'page-active' : ''}\" href=\"#\" data-value=\"${page}\">${page + 1}</a></li>`)\n          .join('')}\n        ${next}\n      </ul>\n    `;\n\n    [...container.querySelectorAll('a')].forEach(element => {\n      element.addEventListener('click', event => {\n        event.preventDefault();\n        refine(event.currentTarget.dataset.value);\n      });\n    });\n  } else if(nbPages > 1 && nbPages > 7) {\n    const previous  = `<li><a class=\"prev ${currentRefinement > 0 ? '' : 'disabled' }\" href=\"#\" data-value=\"${currentRefinement - 1}\">Previous</a></li>`;\n    const next      = `<li><a class=\"next ${currentRefinement < nbPages - 1 ? '' : 'disabled'}\" href=\"#\" data-value=\"${currentRefinement + 1}\">Next</a></li>`;\n\n    const first = pages.includes(0) ? '' : `<li><a class=\"page\" href=\"#\" data-value=\"0\">1</a></li><li>...</li>`;\n    const last  = pages.includes(nbPages - 1) ? '' : `<li>...</li><li><a class=\"page\" href=\"#\" data-value=\"${nbPages - 1}\">${nbPages}</a></li>`;\n\n    container.innerHTML = `\n      <ul class=\"pagination\">\n        ${previous}\n        ${first}\n        ${pages\n          .map(page => `<li><a class=\"page ${currentRefinement === page ? 'page-active' : ''}\" href=\"#\" data-value=\"${page}\">${page + 1}</a></li>`)\n          .join('')}\n        ${last}\n        ${next}\n      </ul>\n    `;\n\n    [...container.querySelectorAll('a')].forEach(element => {\n      element.addEventListener('click', event => {\n        event.preventDefault();\n        refine(event.currentTarget.dataset.value);\n      });\n    });\n  } else {\n    container.innerHTML = '';\n  }\n};\n\n// 2. Create the custom widget\nconst customPagination = instantsearch.connectors.connectPagination(\n  renderPagination\n);\n\n// 3. Instantiate\nsearch.addWidgets([\n  customPagination({\n    padding: 2,\n  })\n]);\n\nsearch.start();\n"],"sourceRoot":""}