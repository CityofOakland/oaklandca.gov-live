<section class="mb-12">
	<div class="container px-6 pt-10 pb-8 {{ block.background }}">
		<div class="px-2 sm:px-6 md:px-6 lg:px-6 pb-1">
			
			<h3 class="font-bold pb-6">{{ block.heading|default('Profile') }}</h3>

			{% if block.featured|length %}
				{% for entry in block.featured.all() %}

					{% set photo = photo ?? entry.portrait.one ?? '' %}

					<div class="block pt-2">
						<div class="text-gray-1000 lg:flex sm:items-start">
						
							<figure class="block w-40 lg:w-1/3 sm:pr-6">
								{% if photo | length %}
									{# TODO: Migrate these settings to be stored as record properties in Algolia #}
									{% set transformedImage = craft.imager.transformImage(
										photo,
										{width: 150 },
										{ ratio: 1/1, position: photo.getFocalPoint()},
										{ fillTransforms: true}
									) %}
									{% set transformedImages = craft.imager.transformImage(photo, [
										{ width: 360 },
										{ width: 250, jpegQuality: 65 },
										{ width: 150, jpegQuality: 65 }
									], { ratio: 1/1, position: photo.getFocalPoint()},{ fillTransforms: true}) %}
									<img src="{{ transformedImage.url }}" srcset="{{ transformedImages | srcset }}" alt="Portrait of {{ entry.jobTitle }}, {{ entry.title }}" class="block w-full h-full rounded-full">
								{% else %}
									<div class="h-full overflow-hidden text-gray-400 bg-gray-100 border-2 border-gray-200 rounded-full opacity-75 fill-current">
										<svg class="block h-full" xmlns="http://www.w3.org/2000/svg" fill-rule="evenodd" fill="" stroke-linejoin="round" stroke-miterlimit="2" clip-rule="evenodd" viewBox="0 0 140 140" xml:space="preserve" fill="currentColor"><path d="M39.168 47.556C39.168 64.473 53.083 78.39 70 78.39s30.832-13.916 30.832-30.833c0-16.916-13.915-30.832-30.832-30.832S39.168 30.64 39.168 47.555zm7.708 0c0-12.687 10.437-23.124 23.124-23.124S93.124 34.87 93.124 47.556c0 12.688-10.437 23.125-23.124 23.125S46.876 60.244 46.876 47.556zm-23.124 88.643c0-25.37 20.878-46.248 46.248-46.248 25.37 0 46.248 20.878 46.248 46.248a3.855 3.855 0 0 0 3.854 3.854 3.855 3.855 0 0 0 3.854-3.854c0-29.6-24.357-53.956-53.956-53.956-29.6 0-53.956 24.357-53.956 53.956a3.855 3.855 0 0 0 3.854 3.854 3.855 3.855 0 0 0 3.854-3.854z"/></svg>
									</div>
								{% endif %}
							</figure>

							<div class="mt-4 lg:mt-0 lg:ml-6 lg:w-3/4">
								<h3 class="font-bold">{{ entry.title }}</h3>
								<span class="text-md font-bold mt-4 block">{{ entry.jobTitle }}</span>
								<span class="text-md">{{ entry.bio }}</span>

								{% if block.buttons|length %}
									{% for buttons in block.buttons.all() %}
										{% set card = buttons.button %}
										{% set linkType = card.typeHandle %}
										
										<a class="button text-sm secondary p-4 mb-1" href="{{ card.url }}" target="{{ card.target }}">
											{{ buttons.button.text }}
										</a>
									{% endfor %}
								{% endif %}

							</div>

						</div>
					</div>
				{% endfor %}
			{% endif %}

		</div>
	</div>
</section>