{% import '_macros/_macros.twig' as macros %}

<div id="topbar">
    <div class="flex items-center justify-end lg:justify-between px-0 lg:px-6 bg-green-1000 lg:bg-green-800 text-white relative">
        <p class="hidden lg:block"><b>Official Website for the City of Oakland</b> <span class="mx-1">|</span> <a class="hover:text-green-800 hover:underline" href="{{ siteUrl }}officials/libby-schaaf">Mayor Libby Schaaf</a></p>
        <nav class="flex items-center" id="top-navigation" name="Top Navigation">
            {% set translation_url = 'https://www-oaklandca-gov.translate.goog' ~ craft.app.request.url %}
            <ul class="flex items-center">
                <li class="hidden lg:block ml-4"><a class="language" href="{{ siteUrl }}">English</a></li>
                <li class="hidden lg:block ml-4"><a class="language" href="{{ translation_url }}?_x_tr_sl=auto&_x_tr_tl=es&_x_tr_hl=en&_x_tr_pto=wapp">Español</a></li>
                <li class="hidden lg:block ml-4"><a class="language" href="{{ translation_url }}?_x_tr_sl=auto&_x_tr_tl=zh-TW&_x_tr_hl=en&_x_tr_pto=wapp">中文</a></li>
                <li class="hidden lg:block ml-4"><a class="language" href="{{ translation_url }}?_x_tr_sl=auto&_x_tr_tl=vi&_x_tr_hl=en&_x_tr_pto=wapp">Tiếng Việt</a></li>
            </li>
            <p class="hidden lg:block ml-4">|</p>
            <li id="translate" class="has-submenu click fill-current">
                <a tabindex="0" id="navbar-dropdown-translate" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">{{ svg( '@webroot/dist/img/icon-translate.svg')|attr({ class: 'fill-current text-yellow-200 lg:hidden' }) }} {{ "Translate"|t }} {{ svg( '@webroot/dist/img/icon-arrow.svg')|attr({ class: 'fill-current' }) }}</a>
                <ul class="components grid grid-cols-2 gap-x-6 p-4 lg:p-6 bg-green-800" aria-labelledby="navbar-dropdown-translate">
                    <li><a class="focusable language underline" href="{{ translation_url }}?_x_tr_sl=auto&_x_tr_tl=ceb&_x_tr_hl=en&_x_tr_pto=wapp">Cebuano</a></li>
                    <li><a class="focusable language underline" href="{{ translation_url }}?_x_tr_sl=auto&_x_tr_tl=km&_x_tr_hl=en&_x_tr_pto=wapp">ភាសាខ្មែរ</a></li>
                    <li><a class="focusable language underline" href="{{ translation_url }}?_x_tr_sl=auto&_x_tr_tl=zh-TW&_x_tr_hl=en&_x_tr_pto=wapp">中文</a></li>
                    <li><a class="focusable language underline" href="{{ translation_url }}?_x_tr_sl=auto&_x_tr_tl=ko&_x_tr_hl=en&_x_tr_pto=wapp">한국어</a></li>
                    <li><a class="focusable language underline" href="{{ siteUrl }}">English</a></li>
                    <li><a class="focusable language underline" href="{{ translation_url }}?_x_tr_sl=auto&_x_tr_tl=mn&_x_tr_hl=en&_x_tr_pto=wapp">монгол</a></li>
                    <li><a class="focusable language underline" href="{{ translation_url }}?_x_tr_sl=auto&_x_tr_tl=tl&_x_tr_hl=en&_x_tr_pto=wapp">Filipino</a></li>
                    <li><a class="focusable language underline" href="{{ translation_url }}?_x_tr_sl=auto&_x_tr_tl=es&_x_tr_hl=en&_x_tr_pto=wapp">Español</a></li>
                    <li><a class="focusable language underline" href="{{ translation_url }}?_x_tr_sl=auto&_x_tr_tl=hmn&_x_tr_hl=en&_x_tr_pto=wapp">Hmoob</a></li>
                    <li><a class="focusable language underline" href="{{ translation_url }}?_x_tr_sl=auto&_x_tr_tl=vi&_x_tr_hl=en&_x_tr_pto=wapp">Tiếng Việt</a></li>
                    <li><a class="focusable language underline" href="{{ translation_url }}?_x_tr_sl=auto&_x_tr_tl=ja&_x_tr_hl=en&_x_tr_pto=wapp">日本語</a></li>
                </ul>
            </li>
        </nav>
    </div>
    <div class="relative">
        <nav id="main-navigation" class="flex items-center justify-between px-4 lg:px-6 bg-gray-1000 text-white relative" name="Main Navigation">
            <a id="home-link" class="flex items-center justify-center py-2 lg:py-2" href="{{ siteUrl }}" name="Home">
                {{ svg( '@webroot/dist/img/logo-oakland-tree.svg')|attr({ class: 'h-9 sm:h-10 w-14 md:h-10 lg:hidden fill-current text-gray-100 hover:text-gray-200' }) }}
                {{ svg( '@webroot/dist/img/logo-oakland.svg')|attr({ class: 'w-40 h-10 hidden lg:block fill-current text-gray-100 hover:text-gray-200' }) }}
                <span class="sr-only">Home</span>
            </a>

            <ul class="flex items-center list-none">
                {% for item in navigation.navigationMain.level(1).all() %}
                    <li class="has-submenu click hidden lg:block">
                        <a tabindex="0" id="navbar-dropdown-{{ item.heading|replace({' ': '-'})|lower }}" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">{{ item.heading }} {{ svg( '@webroot/dist/img/icon-arrow.svg')|attr({ class: 'fill-current' }) }}</a>
                        <ul class="components grid md:grid-cols-3 gap-x-6 px-6 pt-2 pb-6 bg-green-800" aria-labelledby="navbar-dropdown-{{ item.heading|replace({' ': '-'})|lower }}">
                            <li class="pt-4 pb-32 relative">
                                <h2 class="pt-3">{{ item.heading }}</h2>
                                {% if item.description %}<p class="pt-2" style="font-size:20px;line-height:1.5">{{ item.description }}</p>{% endif %}
                                {% if item.linkit %}
                                    <a class="button accent" href="{{ item.linkit.url }}">{{ item.linkit.text }}</a>
                                {% endif %}
                            </li>
                            {% set navItems = item.children.all() %}
                            <li>
                                <ul>
                                {% for navItem in navItems|slice(0, navItems|length/2) %}
                                    <li>{{ macros.cardManual(navItem.linkit.url, navItem.linkit.text, navItem.linkit.element ? (navItem.linkit.element.summary) , (navItem.styleCard == 'dark' ? true : false), false) }}</li>
                                {% endfor %}
                                </ul>
                            </li>
                            <li>
                                <ul>
                                {% for navItem in navItems|slice(navItems|length/2, navItems|length) %}
                                    <li>{{ macros.cardManual(navItem.linkit.url, navItem.linkit.text, navItem.linkit.element ? (navItem.linkit.element.summary) , (navItem.styleCard == 'dark' ? true : false), false) }}</li>
                                {% endfor %}
                                </ul>
                            </li>
                        </ul>
                    </li>
                {% endfor %}

                <li class="has-submenu click ml-5 flex items-center justify-end lg:justify-center" style="min-width:52px;">
                    <a 
                        tabindex="0" 
                        id="navbar-dropdown-search" 
                        data-toggle="dropdown" 
                        role="button" 
                        aria-haspopup="true" 
                        aria-expanded="false"
                        data-affects="navbar-dropdown-mobile"
                        data-affects-class="disabled"
                    >{{ svg( '@webroot/dist/img/icon-magnifier.svg')|attr({ class: 'fill-current text-gray-900' }) }}{{ svg( '@webroot/dist/img/icon-x.svg')|attr({ class: 'fill-current text-white' }) }}</a>
                    <ul class="components px-4 lg:px-6 pt-2 pb-6 bg-green-800" aria-labelledby="navbar-dropdown-search">
                        <li>
                            <h3 class="pt-6">Search Oakland.ca.gov</h3>
                            <form id="site-search-form" class="mt-4 relative" action="{{ url('search') }}" role="search">
                                <label for="site-search" class="hidden-visually">Search?</label>
                                <input type="search" id="site-search" class="form-control" aria-label="Site Search" name="query" placeholder="Search for keywords" value="">
                                <button>{{ svg( '@webroot/dist/img/icon-magnifier.svg')|attr({ class: 'fill-current text-gray-900' }) }}</button>
                            </form>
                        </li>
                        <li class="hidden lg:block">
                            <h3 class="pt-6">Popular on Oakland.ca.gov</h3>
                            <ul class="list-none grid md:grid-cols-3 gap-x-6 pt-4">
                                {% for navItem in navigation.linkits.all() %}
                                    <li>{{ macros.cardManual(navItem.linkit.url, navItem.linkit.text, navItem.linkit.element ? (navItem.linkit.element.summary) , (navItem.styleCard == 'dark' ? true : false), false) }}</li>
                                {% endfor %}
                            </ul>
                        </li>
                    </ul>
                </li>
            </ul>
        </nav>
        <nav id="mobile-navigation" class="bg-green-800 text-white lg:hidden" name="Mobile Navigation">
            <a tabindex="0" id="navbar-dropdown-mobile" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">
                {{ svg( '@webroot/dist/img/icon-menu.svg')|attr({ class: 'fill-current text-white' }) }}
                {{ svg( '@webroot/dist/img/icon-x.svg')|attr({ class: 'fill-current text-white' }) }}
                <span class="sr-only">Mobile Menu</span>
            </a>
            <ul aria-labelledby="navbar-dropdown-mobile" class="px-4 py-2">
                {% for item in navigation.navigationMain.level(1).all() %}
                    {% if item.toggle %}
                        {% if item.linkit %}
                            <li class="border-green-600 border-b"><a class="focusable" href="{{ item.linkit.url }}">{{ item.heading }}</a></li>
                        {% endif %}
                    {% else %}
                        <li class="has-submenu click border-green-600 border-b">
                            <a 
                                tabindex="0" 
                                id="navbar-dropdown-mobile-{{ item.heading|replace({' ': '-'})|lower }}" 
                                role="button" 
                                aria-haspopup="true" 
                                aria-expanded="false" 
                                data-parent="#navbar-dropdown-mobile" 
                                data-toggle="dropdown" 
                                class="focusable"
                            >{{ item.heading }} <span>{{ svg( '@webroot/dist/img/icon-arrow.svg')|attr({ class: 'fill-current' }) }}</span></a>
                            <ul class="components" aria-labelledby="navbar-dropdown-mobile-{{ item.heading|replace({' ': '-'})|lower }}">
                                {% set navItems = item.children.all() %}
                                {% for navItem in navItems %}
                                    <li><a class="block focusable p-4 border-green-600 bg-green-900 border-t" href="{{ navItem.linkit.url }}">{{ navItem.linkit.text }}</a></li>
                                {% endfor %}
                                {% if item.linkit %}
                                    <li><a class="block focusable p-4 border-green-600 bg-yellow-500 text-gray-1000 border-t" href="{{ item.linkit.url }}" style="color:#222222">{{ item.linkit.text }}</a></li>
                                {% endif %}
                            </ul>
                        </li>
                    {% endif %}
                {% endfor %}
            </ul>
        </nav>
    </div>
</div>
