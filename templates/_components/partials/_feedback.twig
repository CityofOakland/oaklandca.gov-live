<section style="background:#222222">
	<div class="container components py-6">
		<div id="helpful" class="flex items-center justify-between text-white">
			<div class="flex items-center">
				<p class="mr-8">Was this page helpful?</p>
				{{ craft.freeform.form("wasThisPageHelpful", {
					labelClass: "form-label",
					inputClass: "form-control",
					overrideValues: {
						entryUrl: entry.url,
					}
				}).render() }}
			</div>
			<p id="reportProblem" class="cursor-pointer"><u>Report a problem with this page</u></p>
		</div>
		<div class="flex flex-wrap justify-between -mx-3">
          <div class="lg:w-3/4 xl:w-1/2 px-3">
          	<div id="reportProblemForm" class="hidden">
	          	{{ craft.freeform.form("reportProblem", {
					labelClass: "form-label",
					inputClass: "form-control",
					overrideValues: {
						entryUrl: entry.url,
					}
				}).render() }}
			</div>
          </div>
        </div>
	</div>
</section>

{% js at endBody %}
	var helpful_value = null;

	jQuery('[data-handle="wasThisPageHelpful"] button').on('click', function(){
		helpful_value = jQuery(this).text();
	});

	var form_helpfulness = document.querySelector('[data-handle="wasThisPageHelpful"]');
	form_helpfulness.addEventListener('freeform-ajax-success', function (event) {
		$('#helpful p').remove();
		$('<p class="text-white"><b>Thank you for your feedback</b></p>').insertAfter(form_helpfulness);
		$(form_helpfulness).remove();
	});

  	form_helpfulness.addEventListener('freeform-on-submit', function(event) {
  		form_helpfulness.querySelector('input[name="helpfulness"]').value = helpful_value;
  	})

  	var form_report = document.querySelector('[data-handle="reportProblem"]');
	form_report.addEventListener('freeform-ajax-success', function (event) {
		$('<p class="text-white"><b>Thank you for your feedback</b></p>').insertAfter(form_report);
  		$(form_report).remove();
  	});

  	$('#reportProblem').on('click', function(){
  		$('#reportProblemForm').removeClass('hidden');
  		$('#helpful').addClass('hidden');
  	});
{% endjs %}

<style>
	form[data-handle="reportProblem"] {
		color: white;
	}

	.components form {
		font-size: 16px;
		line-height: 1.5;
	}

	.components form label {
		font-size: 14px;
		margin-bottom: 0.5em;
	}

	.components form button {
	  background: white;
	  border: 2px solid #207127;
	  border-radius: 2px;
	  color: #207127;
	  display: inline-block;
	  font-weight: 700;
	  font-size:  16px;
	  line-height: 1.38;
	  margin-top: 1em;
	  outline-offset: 2px;
	  padding: 16px 32px;
	  text-decoration: none;
	}

	.components form button:hover {
	  border-color: #0D5713;
	  color: #0D5713;
	}

	.components form button:active {
	  border-color: #04400A;
	  color: #04400A;
	}

	.components form textarea {
		color: #222222;
		padding: 0.5em;
	}

	.components .freeform-row .freeform-column {
		padding: 5px 0;
	}

	.components form[data-handle="wasThisPageHelpful"] .freeform-column {
		margin: 0;
		padding: 0;
	}

	.components form[data-handle="wasThisPageHelpful"] button {
		margin: 0 0.5rem !important;
  		padding: 8px 8px;
	}
</style>